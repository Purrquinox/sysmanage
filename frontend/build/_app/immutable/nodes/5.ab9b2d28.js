import{S as x,i as ee,s as te,a7 as Te,k as S,q as R,a as I,l as A,m as L,r as H,h as m,c as N,n as B,b as T,G as $,H as oe,N as ie,u as $e,a8 as De,a9 as Ce,aa as Ee,g as h,v as U,d,f as X,T as Ie,y as G,z as j,A as O,B as V,e as J,K as ke,J as M,w as Ne,ac as Se,C as Ae,ab as Be,ad as Le,I as Pe}from"../chunks/index.607a4587.js";import{I as Re}from"../chunks/InputSm.96943004.js";import{B as re,e as se}from"../chunks/strings.82d8c965.js";import{T as be,n as ae}from"../chunks/tasks.746ddd9e.js";import{B as we}from"../chunks/Button.e2b5263d.js";import{G as He}from"../chunks/GreyText.545daa15.js";import{O as Ge}from"../chunks/ObjectRender.e8dbfac2.js";function fe(i){let e,l;return e=new we({props:{link:i[1],showArrow:i[3],$$slots:{default:[je]},$$scope:{ctx:i}}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.link=t[1]),n&8&&(o.showArrow=t[3]),n&132&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function je(i){let e;return{c(){e=R(i[2])},l(l){e=H(l,i[2])},m(l,t){T(l,e,t)},p(l,t){t&4&&$e(e,l[2])},d(l){l&&m(e)}}}function Oe(i){let e,l,t,n,o,r,a,s,u;const k=i[6].default,f=Te(k,i,i[7],null);let c=i[4]&&fe(i);return{c(){e=S("article"),l=S("h5"),t=R(i[0]),n=I(),o=S("p"),f&&f.c(),r=I(),c&&c.c(),this.h()},l(_){e=A(_,"ARTICLE",{class:!0});var b=L(e);l=A(b,"H5",{class:!0});var g=L(l);t=H(g,i[0]),g.forEach(m),n=N(b),o=A(b,"P",{class:!0});var E=L(o);f&&f.l(E),E.forEach(m),r=N(b),c&&c.l(b),b.forEach(m),this.h()},h(){B(l,"class","mb-2 text-2xl font-bold text-gray-900 dark:text-white hover:cursor-pointer"),B(o,"class","mb-3 font-normal text-gray-700 dark:text-gray-400"),B(e,"class","w-full block p-6 m-3 md:w-1/2 sm:w-96 bg-white rounded-lg shadow-md border border-gray-200 dark:bg-gray-800 dark:border-gray-700")},m(_,b){T(_,e,b),$(e,l),$(l,t),$(e,n),$(e,o),f&&f.m(o,null),$(e,r),c&&c.m(e,null),a=!0,s||(u=[oe(l,"click",function(){ie(i[5])&&i[5].apply(this,arguments)}),oe(l,"keypress",function(){ie(i[5])&&i[5].apply(this,arguments)})],s=!0)},p(_,[b]){i=_,(!a||b&1)&&$e(t,i[0]),f&&f.p&&(!a||b&128)&&De(f,k,i,i[7],a?Ee(k,i[7],b,null):Ce(i[7]),null),i[4]?c?(c.p(i,b),b&16&&h(c,1)):(c=fe(i),c.c(),h(c,1),c.m(e,null)):c&&(U(),d(c,1,1,()=>{c=null}),X())},i(_){a||(h(f,_),h(c),a=!0)},o(_){d(f,_),d(c),a=!1},d(_){_&&m(e),f&&f.d(_),c&&c.d(),s=!1,Ie(u)}}}function Ve(i,e,l){let{$$slots:t={},$$scope:n}=e,{title:o}=e,{link:r}=e,{linkText:a}=e,{showArrow:s=!0}=e,{showButton:u=!0}=e,{onClickTitle:k=()=>{}}=e;return i.$$set=f=>{"title"in f&&l(0,o=f.title),"link"in f&&l(1,r=f.link),"linkText"in f&&l(2,a=f.linkText),"showArrow"in f&&l(3,s=f.showArrow),"showButton"in f&&l(4,u=f.showButton),"onClickTitle"in f&&l(5,k=f.onClickTitle),"$$scope"in f&&l(7,n=f.$$scope)},[o,r,a,s,u,k,t,n]}class Me extends x{constructor(e){super(),ee(this,e,Ve,Oe,te,{title:0,link:1,linkText:2,showArrow:3,showButton:4,onClickTitle:5})}}function ce(i,e,l){const t=i.slice();return t[3]=e[l],t}function qe(i){let e;return{c(){e=R('Click the domain title to view more information. Click "Edit" to edit this domain')},l(l){e=H(l,'Click the domain title to view more information. Click "Edit" to edit this domain')},m(l,t){T(l,e,t)},d(l){l&&m(e)}}}function ue(i){let e,l,t,n,o,r,a;const s=[Xe,Ue],u=[];function k(f,c){var _,b;return((b=(_=f[1])==null?void 0:_.Server)==null?void 0:b.Servers.length)==0?0:1}return o=k(i),r=u[o]=s[o](i),{c(){e=S("p"),l=R("More information"),t=I(),n=S("div"),r.c(),this.h()},l(f){e=A(f,"P",{class:!0});var c=L(e);l=H(c,"More information"),c.forEach(m),t=N(f),n=A(f,"DIV",{class:!0});var _=L(n);r.l(_),_.forEach(m),this.h()},h(){B(e,"class","font-semibold text-lg"),B(n,"class","text-sm")},m(f,c){T(f,e,c),$(e,l),T(f,t,c),T(f,n,c),u[o].m(n,null),a=!0},p(f,c){let _=o;o=k(f),o===_?u[o].p(f,c):(U(),d(u[_],1,1,()=>{u[_]=null}),X(),r=u[o],r?r.p(f,c):(r=u[o]=s[o](f),r.c()),h(r,1),r.m(n,null))},i(f){a||(h(r),a=!0)},o(f){d(r),a=!1},d(f){f&&m(e),f&&m(t),f&&m(n),u[o].d()}}}function Ue(i){var r,a;let e,l,t=(a=(r=i[1])==null?void 0:r.Server)==null?void 0:a.Servers,n=[];for(let s=0;s<t.length;s+=1)n[s]=me(ce(i,t,s));const o=s=>d(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=J()},l(s){for(let u=0;u<n.length;u+=1)n[u].l(s);e=J()},m(s,u){for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(s,u);T(s,e,u),l=!0},p(s,u){var k,f;if(u&2){t=(f=(k=s[1])==null?void 0:k.Server)==null?void 0:f.Servers;let c;for(c=0;c<t.length;c+=1){const _=ce(s,t,c);n[c]?(n[c].p(_,u),h(n[c],1)):(n[c]=me(_),n[c].c(),h(n[c],1),n[c].m(e.parentNode,e))}for(U(),c=t.length;c<n.length;c+=1)o(c);X()}},i(s){if(!l){for(let u=0;u<t.length;u+=1)h(n[u]);l=!0}},o(s){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(s){ke(n,s),s&&m(e)}}}function Xe(i){let e,l;return{c(){e=S("p"),l=R("This is a brand new domain with no servers attached to it"),this.h()},l(t){e=A(t,"P",{class:!0});var n=L(e);l=H(n,"This is a brand new domain with no servers attached to it"),n.forEach(m),this.h()},h(){B(e,"class","text-red-500")},m(t,n){T(t,e,n),$(e,l)},p:M,i:M,o:M,d(t){t&&m(e)}}}function me(i){let e,l,t,n;return e=new Ge({props:{object:i[3]}}),{c(){G(e.$$.fragment),l=I(),t=S("div"),this.h()},l(o){j(e.$$.fragment,o),l=N(o),t=A(o,"DIV",{class:!0}),L(t).forEach(m),this.h()},h(){B(t,"class","mt-7")},m(o,r){O(e,o,r),T(o,l,r),T(o,t,r),n=!0},p(o,r){const a={};r&2&&(a.object=o[3]),e.$set(a)},i(o){n||(h(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){V(e,o),o&&m(l),o&&m(t)}}}function ze(i){let e,l,t,n;e=new He({props:{$$slots:{default:[qe]},$$scope:{ctx:i}}});let o=i[0]&&ue(i);return{c(){G(e.$$.fragment),l=I(),o&&o.c(),t=J()},l(r){j(e.$$.fragment,r),l=N(r),o&&o.l(r),t=J()},m(r,a){O(e,r,a),T(r,l,a),o&&o.m(r,a),T(r,t,a),n=!0},p(r,a){const s={};a&64&&(s.$$scope={dirty:a,ctx:r}),e.$set(s),r[0]?o?(o.p(r,a),a&1&&h(o,1)):(o=ue(r),o.c(),h(o,1),o.m(t.parentNode,t)):o&&(U(),d(o,1,1,()=>{o=null}),X())},i(r){n||(h(e.$$.fragment,r),h(o),n=!0)},o(r){d(e.$$.fragment,r),d(o),n=!1},d(r){V(e,r),r&&m(l),o&&o.d(r),r&&m(t)}}}function Fe(i){var t,n;let e,l;return e=new Me({props:{title:(t=i[1])==null?void 0:t.Domain,link:`/plugins/nginx/domain?id=${(n=i[1])==null?void 0:n.Domain}`,linkText:"Edit",onClickTitle:i[2],$$slots:{default:[ze]},$$scope:{ctx:i}}}),{c(){G(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,r){O(e,o,r),l=!0},p(o,[r]){var s,u;const a={};r&2&&(a.title=(s=o[1])==null?void 0:s.Domain),r&2&&(a.link=`/plugins/nginx/domain?id=${(u=o[1])==null?void 0:u.Domain}`),r&1&&(a.onClickTitle=o[2]),r&67&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){V(e,o)}}}function Je(i,e,l){let{domain:t}=e,{showDomainInfo:n=!1}=e;const o=()=>l(0,n=!n);return i.$$set=r=>{"domain"in r&&l(1,t=r.domain),"showDomainInfo"in r&&l(0,n=r.showDomainInfo)},[n,t,o]}class Ke extends x{constructor(e){super(),ee(this,e,Je,Fe,te,{domain:1,showDomainInfo:0})}}function he(i,e,l){const t=i.slice();return t[13]=e[l],t}function Qe(i){let e;return{c(){e=R("Build Nginx")},l(l){e=H(l,"Build Nginx")},m(l,t){T(l,e,t)},d(l){l&&m(e)}}}function We(i){let e;return{c(){e=R("Update Cloudflare")},l(l){e=H(l,"Update Cloudflare")},m(l,t){T(l,e,t)},d(l){l&&m(e)}}}function ye(i){let e;return{c(){e=R("Add Domain")},l(l){e=H(l,"Add Domain")},m(l,t){T(l,e,t)},d(l){l&&m(e)}}}function _e(i){let e,l;return e=new be({props:{output:i[1]}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.output=t[1]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function de(i){let e,l;return e=new be({props:{output:i[3]}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&8&&(o.output=t[3]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Ye(i){let e,l=i[16]+"",t;return{c(){e=S("h2"),t=R(l),this.h()},l(n){e=A(n,"H2",{class:!0});var o=L(e);t=H(o,l),o.forEach(m),this.h()},h(){B(e,"class","text-red-500")},m(n,o){T(n,e,o),$(e,t)},p:M,i:M,o:M,d(n){n&&m(e)}}}function Ze(i){let e,l,t=i[12],n=[];for(let r=0;r<t.length;r+=1)n[r]=pe(he(i,t,r));const o=r=>d(n[r],1,1,()=>{n[r]=null});return{c(){e=S("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=A(r,"DIV",{class:!0});var a=L(e);for(let s=0;s<n.length;s+=1)n[s].l(a);a.forEach(m),this.h()},h(){B(e,"class","flex flex-wrap justify-center items-center justify-evenly")},m(r,a){T(r,e,a);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);l=!0},p(r,a){if(a&400){t=r[12];let s;for(s=0;s<t.length;s+=1){const u=he(r,t,s);n[s]?(n[s].p(u,a),h(n[s],1)):(n[s]=pe(u),n[s].c(),h(n[s],1),n[s].m(e,null))}for(U(),s=t.length;s<n.length;s+=1)o(s);X()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)h(n[a]);l=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)d(n[a]);l=!1},d(r){r&&m(e),ke(n,r)}}}function ge(i){let e,l;return e=new Ke({props:{domain:i[13]}}),{c(){G(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p:M,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function pe(i){let e=i[8](i[13],i[4]),l,t,n=e&&ge(i);return{c(){n&&n.c(),l=J()},l(o){n&&n.l(o),l=J()},m(o,r){n&&n.m(o,r),T(o,l,r),t=!0},p(o,r){r&16&&(e=o[8](o[13],o[4])),e?n?(n.p(o,r),r&16&&h(n,1)):(n=ge(o),n.c(),h(n,1),n.m(l.parentNode,l)):n&&(U(),d(n,1,1,()=>{n=null}),X())},i(o){t||(h(n),t=!0)},o(o){d(n),t=!1},d(o){n&&n.d(o),o&&m(l)}}}function xe(i){let e,l;return{c(){e=S("h2"),l=R("Loading domain list"),this.h()},l(t){e=A(t,"H2",{class:!0});var n=L(e);l=H(n,"Loading domain list"),n.forEach(m),this.h()},h(){B(e,"class","text-xl")},m(t,n){T(t,e,n),$(e,l)},p:M,i:M,o:M,d(t){t&&m(e)}}}function et(i){let e,l,t,n,o,r,a,s,u,k,f,c,_,b,g,E,F,z,W,q,Y,Z,y;a=new re({props:{onclick:i[9],$$slots:{default:[Qe]},$$scope:{ctx:i}}}),u=new re({props:{onclick:i[10],$$slots:{default:[We]},$$scope:{ctx:i}}}),f=new we({props:{link:"/plugins/nginx/new",$$slots:{default:[ye]},$$scope:{ctx:i}}});let D=i[0]!=""&&_e(i),C=i[2]!=""&&de(i);function ve(w){i[11](w)}let ne={id:"domain",label:"Filter by domain",placeholder:"E.g. arcadia",showErrors:!1,minlength:0};i[4]!==void 0&&(ne.value=i[4]),q=new Re({props:ne}),Ne.push(()=>Se(q,"value",ve));let P={ctx:i,current:null,token:null,hasCatch:!0,pending:xe,then:Ze,catch:Ye,value:12,error:16,blocks:[,,,]};return Ae(i[7](),P),{c(){e=S("meta"),l=I(),t=S("section"),n=S("h2"),o=R("Actions"),r=I(),G(a.$$.fragment),s=I(),G(u.$$.fragment),k=I(),G(f.$$.fragment),c=I(),_=S("div"),b=I(),g=S("h2"),E=R("Nginx Domain List"),F=I(),D&&D.c(),z=I(),C&&C.c(),W=I(),G(q.$$.fragment),Z=I(),P.block.c(),this.h()},l(w){const v=Be("svelte-1gfie9u",document.head);e=A(v,"META",{name:!0,content:!0}),v.forEach(m),l=N(w),t=A(w,"SECTION",{});var p=L(t);n=A(p,"H2",{class:!0});var K=L(n);o=H(K,"Actions"),K.forEach(m),r=N(p),j(a.$$.fragment,p),s=N(p),j(u.$$.fragment,p),k=N(p),j(f.$$.fragment,p),c=N(p),_=A(p,"DIV",{class:!0}),L(_).forEach(m),b=N(p),g=A(p,"H2",{class:!0});var Q=L(g);E=H(Q,"Nginx Domain List"),Q.forEach(m),F=N(p),D&&D.l(p),z=N(p),C&&C.l(p),W=N(p),j(q.$$.fragment,p),Z=N(p),P.block.l(p),p.forEach(m),this.h()},h(){document.title="NGINX config",B(e,"name","description"),B(e,"content","NGINX management"),B(n,"class","text-xl font-semibold"),B(_,"class","mb-3"),B(g,"class","text-xl font-semibold")},m(w,v){$(document.head,e),T(w,l,v),T(w,t,v),$(t,n),$(n,o),$(t,r),O(a,t,null),$(t,s),O(u,t,null),$(t,k),O(f,t,null),$(t,c),$(t,_),$(t,b),$(t,g),$(g,E),$(t,F),D&&D.m(t,null),$(t,z),C&&C.m(t,null),$(t,W),O(q,t,null),$(t,Z),P.block.m(t,P.anchor=null),P.mount=()=>t,P.anchor=null,y=!0},p(w,[v]){i=w;const p={};v&131072&&(p.$$scope={dirty:v,ctx:i}),a.$set(p);const K={};v&131072&&(K.$$scope={dirty:v,ctx:i}),u.$set(K);const Q={};v&131072&&(Q.$$scope={dirty:v,ctx:i}),f.$set(Q),i[0]!=""?D?(D.p(i,v),v&1&&h(D,1)):(D=_e(i),D.c(),h(D,1),D.m(t,z)):D&&(U(),d(D,1,1,()=>{D=null}),X()),i[2]!=""?C?(C.p(i,v),v&4&&h(C,1)):(C=de(i),C.c(),h(C,1),C.m(t,W)):C&&(U(),d(C,1,1,()=>{C=null}),X());const le={};!Y&&v&16&&(Y=!0,le.value=i[4],Le(()=>Y=!1)),q.$set(le),Pe(P,i,v)},i(w){y||(h(a.$$.fragment,w),h(u.$$.fragment,w),h(f.$$.fragment,w),h(D),h(C),h(q.$$.fragment,w),h(P.block),y=!0)},o(w){d(a.$$.fragment,w),d(u.$$.fragment,w),d(f.$$.fragment,w),d(D),d(C),d(q.$$.fragment,w);for(let v=0;v<3;v+=1){const p=P.blocks[v];d(p)}y=!1},d(w){m(e),w&&m(l),w&&m(t),V(a),V(u),V(f),D&&D.d(),C&&C.d(),V(q),P.block.d(),P.token=null,P=null}}}function tt(i,e,l){let t="",n=[];const o=async()=>{let g=await fetch("/api/nginx/buildNginx",{method:"POST"});if(!g.ok){let E=await g.text();se(E);return}l(0,t=await g.text()),ae(t,E=>{l(1,n=E)})};let r="",a=[];const s=async()=>{let g=await fetch("/api/nginx/updateDnsRecordCf",{method:"POST"});if(!g.ok){let E=await g.text();se(E);return}l(2,r=await g.text()),ae(r,E=>{l(3,a=E)})},u=async()=>{let g=await fetch("/api/nginx/getDomainList",{method:"POST"});if(!g.ok){let E=await g.text();throw new Error(E)}return await g.json()},k=(g,E)=>{var z;let F=!0;return E!=""&&!((z=g==null?void 0:g.Domain)!=null&&z.toLowerCase().includes(E.toLowerCase()))&&(F=!1),F};let f;const c=()=>o(),_=()=>s();function b(g){f=g,l(4,f)}return[t,n,r,a,f,o,s,u,k,c,_,b]}class ft extends x{constructor(e){super(),ee(this,e,tt,et,te,{})}}export{ft as component};
