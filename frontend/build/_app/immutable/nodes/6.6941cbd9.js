import{S as ce,i as me,s as $e,a as O,k as F,c as q,l as J,m as z,h as g,n as W,b as L,G as V,g as w,v as ie,f as fe,d as D,K as ke,e as ve,y as P,z as A,A as B,B as T,q as M,r as H,u as _e,w as y,ac as x,ad as ee,C as qe,I as je,J as be}from"../chunks/index.607a4587.js";import{G as Ge}from"../chunks/GreyText.545daa15.js";import{I as ue}from"../chunks/InputSm.96943004.js";import{B as le,e as Ee,s as Me}from"../chunks/strings.82d8c965.js";import{D as pe}from"../chunks/DangerButton.30216a4e.js";import{I as He}from"../chunks/Input.88fb81a1.js";import{S as Se}from"../chunks/Section.a9ab164c.js";import{S as Re}from"../chunks/Select.43d10eda.js";import{O as We}from"../chunks/ObjectRender.e8dbfac2.js";import"../chunks/paths.54d31f8a.js";import{T as Ye,n as Fe}from"../chunks/tasks.746ddd9e.js";function Ie(l,e,n){const t=l.slice();return t[18]=e[n],t[19]=e,t[20]=n,t}function Je(l){let e,n;return{c(){e=F("label"),n=M(l[3]),this.h()},l(t){e=J(t,"LABEL",{for:!0,class:!0});var r=z(e);n=H(r,l[3]),r.forEach(g),this.h()},h(){W(e,"for",l[1]),W(e,"class","sr-only")},m(t,r){L(t,e,r),V(e,n)},p(t,r){r&8&&_e(n,t[3]),r&2&&W(e,"for",t[1])},d(t){t&&g(e)}}}function ze(l){let e,n;return{c(){e=F("label"),n=M(l[3]),this.h()},l(t){e=J(t,"LABEL",{for:!0,class:!0});var r=z(e);n=H(r,l[3]),r.forEach(g),this.h()},h(){W(e,"for",l[1]),W(e,"class","block mb-1 font-medium text-gray-900 dark:text-gray-300")},m(t,r){L(t,e,r),V(e,n)},p(t,r){r&8&&_e(n,t[3]),r&2&&W(e,"for",t[1])},d(t){t&&g(e)}}}function Ke(l){let e,n,t;function r(f){l[16](f,l[18],l[19],l[20])}let s={id:l[20].toString(),inpClass:"mb-1",label:l[2]+" "+(l[20]+1),placeholder:l[4],minlength:l[5],$$slots:{default:[Ze]},$$scope:{ctx:l}};return l[18]!==void 0&&(s.value=l[18]),e=new He({props:s}),y.push(()=>x(e,"value",r)),{c(){P(e.$$.fragment)},l(f){A(e.$$.fragment,f)},m(f,$){B(e,f,$),t=!0},p(f,$){l=f;const c={};$&4&&(c.label=l[2]+" "+(l[20]+1)),$&16&&(c.placeholder=l[4]),$&32&&(c.minlength=l[5]),$&2097152&&(c.$$scope={dirty:$,ctx:l}),!n&&$&1&&(n=!0,c.value=l[18],ee(()=>n=!1)),e.$set(c)},i(f){t||(w(e.$$.fragment,f),t=!0)},o(f){D(e.$$.fragment,f),t=!1},d(f){T(e,f)}}}function Ue(l){let e,n,t;function r(f){l[13](f,l[18],l[19],l[20])}let s={id:l[20].toString(),inpClass:"mb-1",label:l[2]+" "+(l[20]+1),placeholder:l[4],minlength:l[5],showErrors:l[7],$$slots:{default:[et]},$$scope:{ctx:l}};return l[18]!==void 0&&(s.value=l[18]),e=new ue({props:s}),y.push(()=>x(e,"value",r)),{c(){P(e.$$.fragment)},l(f){A(e.$$.fragment,f)},m(f,$){B(e,f,$),t=!0},p(f,$){l=f;const c={};$&4&&(c.label=l[2]+" "+(l[20]+1)),$&16&&(c.placeholder=l[4]),$&32&&(c.minlength=l[5]),$&128&&(c.showErrors=l[7]),$&2097152&&(c.$$scope={dirty:$,ctx:l}),!n&&$&1&&(n=!0,c.value=l[18],ee(()=>n=!1)),e.$set(c)},i(f){t||(w(e.$$.fragment,f),t=!0)},o(f){D(e.$$.fragment,f),t=!1},d(f){T(e,f)}}}function Xe(l){let e;return{c(){e=M("Delete")},l(n){e=H(n,"Delete")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function Qe(l){let e;return{c(){e=M("Add")},l(n){e=H(n,"Add")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function Ze(l){let e,n,t,r,s,f;function $(){return l[14](l[20])}n=new pe({props:{onclick:$,$$slots:{default:[Xe]},$$scope:{ctx:l}}});function c(){return l[15](l[20])}return r=new le({props:{onclick:c,$$slots:{default:[Qe]},$$scope:{ctx:l}}}),{c(){e=F("div"),P(n.$$.fragment),t=O(),P(r.$$.fragment),s=O(),this.h()},l(i){e=J(i,"DIV",{class:!0});var u=z(e);A(n.$$.fragment,u),t=q(u),A(r.$$.fragment,u),u.forEach(g),s=q(i),this.h()},h(){W(e,"class","mt-1")},m(i,u){L(i,e,u),B(n,e,null),V(e,t),B(r,e,null),L(i,s,u),f=!0},p(i,u){l=i;const I={};u&2097152&&(I.$$scope={dirty:u,ctx:l}),n.$set(I);const k={};u&2097152&&(k.$$scope={dirty:u,ctx:l}),r.$set(k)},i(i){f||(w(n.$$.fragment,i),w(r.$$.fragment,i),f=!0)},o(i){D(n.$$.fragment,i),D(r.$$.fragment,i),f=!1},d(i){i&&g(e),T(n),T(r),i&&g(s)}}}function ye(l){let e;return{c(){e=M("Delete")},l(n){e=H(n,"Delete")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function xe(l){let e;return{c(){e=M("Add")},l(n){e=H(n,"Add")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function et(l){let e,n,t,r,s,f;function $(){return l[11](l[20])}n=new pe({props:{onclick:$,$$slots:{default:[ye]},$$scope:{ctx:l}}});function c(){return l[12](l[20])}return r=new le({props:{onclick:c,$$slots:{default:[xe]},$$scope:{ctx:l}}}),{c(){e=F("div"),P(n.$$.fragment),t=O(),P(r.$$.fragment),s=O(),this.h()},l(i){e=J(i,"DIV",{class:!0});var u=z(e);A(n.$$.fragment,u),t=q(u),A(r.$$.fragment,u),u.forEach(g),s=q(i),this.h()},h(){W(e,"class","mt-1")},m(i,u){L(i,e,u),B(n,e,null),V(e,t),B(r,e,null),L(i,s,u),f=!0},p(i,u){l=i;const I={};u&2097152&&(I.$$scope={dirty:u,ctx:l}),n.$set(I);const k={};u&2097152&&(k.$$scope={dirty:u,ctx:l}),r.$set(k)},i(i){f||(w(n.$$.fragment,i),w(r.$$.fragment,i),f=!0)},o(i){D(n.$$.fragment,i),D(r.$$.fragment,i),f=!1},d(i){i&&g(e),T(n),T(r),i&&g(s)}}}function Ne(l){let e,n,t,r;const s=[Ue,Ke],f=[];function $(c,i){return c[6]?0:1}return e=$(l),n=f[e]=s[e](l),{c(){n.c(),t=ve()},l(c){n.l(c),t=ve()},m(c,i){f[e].m(c,i),L(c,t,i),r=!0},p(c,i){let u=e;e=$(c),e===u?f[e].p(c,i):(ie(),D(f[u],1,1,()=>{f[u]=null}),fe(),n=f[e],n?n.p(c,i):(n=f[e]=s[e](c),n.c()),w(n,1),n.m(t.parentNode,t))},i(c){r||(w(n),r=!0)},o(c){D(n),r=!1},d(c){f[e].d(c),c&&g(t)}}}function Pe(l){let e,n;return e=new le({props:{onclick:l[17],$$slots:{default:[tt]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&2097156&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function tt(l){let e,n;return{c(){e=M("New "),n=M(l[2])},l(t){e=H(t,"New "),n=H(t,l[2])},m(t,r){L(t,e,r),L(t,n,r)},p(t,r){r&4&&_e(n,t[2])},d(t){t&&g(e),t&&g(n)}}}function nt(l){let e,n,t,r,s;function f(m,a){return m[8]||m[0].length==0?ze:Je}let $=f(l),c=$(l),i=l[0],u=[];for(let m=0;m<i.length;m+=1)u[m]=Ne(Ie(l,i,m));const I=m=>D(u[m],1,1,()=>{u[m]=null});let k=l[0].length==0&&Pe(l);return{c(){c.c(),e=O(),n=F("div"),t=F("div");for(let m=0;m<u.length;m+=1)u[m].c();r=O(),k&&k.c(),this.h()},l(m){c.l(m),e=q(m),n=J(m,"DIV",{id:!0,class:!0});var a=z(n);t=J(a,"DIV",{class:!0});var o=z(t);for(let v=0;v<u.length;v+=1)u[v].l(o);o.forEach(g),r=q(a),k&&k.l(a),a.forEach(g),this.h()},h(){W(t,"class","ml-4"),W(n,"id",l[1]),W(n,"class","mt-2 mb-2")},m(m,a){c.m(m,a),L(m,e,a),L(m,n,a),V(n,t);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(t,null);V(n,r),k&&k.m(n,null),s=!0},p(m,[a]){if($===($=f(m))&&c?c.p(m,a):(c.d(1),c=$(m),c&&(c.c(),c.m(e.parentNode,e))),a&1781){i=m[0];let o;for(o=0;o<i.length;o+=1){const v=Ie(m,i,o);u[o]?(u[o].p(v,a),w(u[o],1)):(u[o]=Ne(v),u[o].c(),w(u[o],1),u[o].m(t,null))}for(ie(),o=i.length;o<u.length;o+=1)I(o);fe()}m[0].length==0?k?(k.p(m,a),a&1&&w(k,1)):(k=Pe(m),k.c(),w(k,1),k.m(n,null)):k&&(ie(),D(k,1,1,()=>{k=null}),fe()),(!s||a&2)&&W(n,"id",m[1])},i(m){if(!s){for(let a=0;a<i.length;a+=1)w(u[a]);w(k),s=!0}},o(m){u=u.filter(Boolean);for(let a=0;a<u.length;a+=1)D(u[a]);D(k),s=!1},d(m){c.d(m),m&&g(e),m&&g(n),ke(u,m),k&&k.d()}}}function lt(l,e,n){let{id:t}=e,{values:r}=e,{title:s}=e,{label:f=s}=e,{placeholder:$}=e,{minlength:c}=e,{small:i=!0}=e,{showErrors:u=!1}=e,{showLabel:I=!0}=e;const k=b=>{n(0,r=r.filter((Z,Y)=>Y!==b))},m=b=>{n(0,r=[...r.slice(0,b+1),"",...r.slice(b+1)])},a=b=>k(b),o=b=>m(b);function v(b,Z,Y,N){Y[N]=b,n(0,r)}const p=b=>k(b),S=b=>m(b);function C(b,Z,Y,N){Y[N]=b,n(0,r)}const R=()=>m(-1);return l.$$set=b=>{"id"in b&&n(1,t=b.id),"values"in b&&n(0,r=b.values),"title"in b&&n(2,s=b.title),"label"in b&&n(3,f=b.label),"placeholder"in b&&n(4,$=b.placeholder),"minlength"in b&&n(5,c=b.minlength),"small"in b&&n(6,i=b.small),"showErrors"in b&&n(7,u=b.showErrors),"showLabel"in b&&n(8,I=b.showLabel)},[r,t,s,f,$,c,i,u,I,k,m,a,o,v,p,S,C,R]}class Oe extends ce{constructor(e){super(),me(this,e,lt,nt,$e,{id:1,values:0,title:2,label:3,placeholder:4,minlength:5,small:6,showErrors:7,showLabel:8})}}function rt(l){let e,n,t,r,s,f,$,c,i,u;function I(p){l[3](p)}let k={id:`l-path-${l[1]}`,label:"Path",description:"You must have a path called '/' in order for stuff to work correctly",placeholder:"E.g. /api",minlength:1};l[0].Path!==void 0&&(k.value=l[0].Path),n=new ue({props:k}),y.push(()=>x(n,"value",I));function m(p){l[4](p)}let a={id:`l-proxy-${l[1]}`,label:"Proxy (Optional, leave blank to not proxy)",placeholder:"E.g. http://localhost:8080",minlength:0,showErrors:!1};l[0].Proxy!==void 0&&(a.value=l[0].Proxy),s=new ue({props:a}),y.push(()=>x(s,"value",m));function o(p){l[5](p)}let v={id:`l-opts-${l[1]}`,title:"Options",minlength:0,showErrors:!1,placeholder:"E.g. proxy_set_header and X-Forwarded-For etc."};return l[2]!==void 0&&(v.values=l[2]),c=new Oe({props:v}),y.push(()=>x(c,"values",o)),{c(){e=F("div"),P(n.$$.fragment),r=O(),P(s.$$.fragment),$=O(),P(c.$$.fragment)},l(p){e=J(p,"DIV",{});var S=z(e);A(n.$$.fragment,S),r=q(S),A(s.$$.fragment,S),$=q(S),A(c.$$.fragment,S),S.forEach(g)},m(p,S){L(p,e,S),B(n,e,null),V(e,r),B(s,e,null),V(e,$),B(c,e,null),u=!0},p(p,[S]){const C={};S&2&&(C.id=`l-path-${p[1]}`),!t&&S&1&&(t=!0,C.value=p[0].Path,ee(()=>t=!1)),n.$set(C);const R={};S&2&&(R.id=`l-proxy-${p[1]}`),!f&&S&1&&(f=!0,R.value=p[0].Proxy,ee(()=>f=!1)),s.$set(R);const b={};S&2&&(b.id=`l-opts-${p[1]}`),!i&&S&4&&(i=!0,b.values=p[2],ee(()=>i=!1)),c.$set(b)},i(p){u||(w(n.$$.fragment,p),w(s.$$.fragment,p),w(c.$$.fragment,p),u=!0)},o(p){D(n.$$.fragment,p),D(s.$$.fragment,p),D(c.$$.fragment,p),u=!1},d(p){p&&g(e),T(n),T(s),T(c)}}}function ot(l,e,n){let{location:t}=e,{i:r}=e,s=t.Opts||[];function f(i){l.$$.not_equal(t.Path,i)&&(t.Path=i,n(0,t),n(2,s))}function $(i){l.$$.not_equal(t.Proxy,i)&&(t.Proxy=i,n(0,t),n(2,s))}function c(i){s=i,n(2,s)}return l.$$set=i=>{"location"in i&&n(0,t=i.location),"i"in i&&n(1,r=i.i)},l.$$.update=()=>{l.$$.dirty&4&&n(0,t.Opts=s,t)},[t,r,s,f,$,c]}class st extends ce{constructor(e){super(),me(this,e,ot,rt,$e,{location:0,i:1})}}function Ae(l,e,n){const t=l.slice();return t[12]=e[n],t[13]=e,t[1]=n,t}function it(l){let e;return{c(){e=M("Delete Location")},l(n){e=H(n,"Delete Location")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function ft(l){let e;return{c(){e=M("Add Location Below")},l(n){e=H(n,"Add Location Below")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function at(l){let e;return{c(){e=M("Move Location")},l(n){e=H(n,"Move Location")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function ut(l){let e,n,t,r,s,f,$,c,i;function u(){return l[7](l[1])}e=new pe({props:{onclick:u,$$slots:{default:[it]},$$scope:{ctx:l}}});function I(){return l[8](l[1])}t=new le({props:{onclick:I,$$slots:{default:[ft]},$$scope:{ctx:l}}});function k(){return l[9](l[1])}s=new le({props:{onclick:k,$$slots:{default:[at]},$$scope:{ctx:l}}});function m(o){l[10](o,l[12],l[13],l[1])}let a={i:l[1]};return l[12]!==void 0&&(a.location=l[12]),$=new st({props:a}),y.push(()=>x($,"location",m)),{c(){P(e.$$.fragment),n=O(),P(t.$$.fragment),r=O(),P(s.$$.fragment),f=O(),P($.$$.fragment)},l(o){A(e.$$.fragment,o),n=q(o),A(t.$$.fragment,o),r=q(o),A(s.$$.fragment,o),f=q(o),A($.$$.fragment,o)},m(o,v){B(e,o,v),L(o,n,v),B(t,o,v),L(o,r,v),B(s,o,v),L(o,f,v),B($,o,v),i=!0},p(o,v){l=o;const p={};v&1&&(p.onclick=u),v&16384&&(p.$$scope={dirty:v,ctx:l}),e.$set(p);const S={};v&1&&(S.onclick=I),v&16384&&(S.$$scope={dirty:v,ctx:l}),t.$set(S);const C={};v&1&&(C.onclick=k),v&16384&&(C.$$scope={dirty:v,ctx:l}),s.$set(C);const R={};!c&&v&1&&(c=!0,R.location=l[12],ee(()=>c=!1)),$.$set(R)},i(o){i||(w(e.$$.fragment,o),w(t.$$.fragment,o),w(s.$$.fragment,o),w($.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),D(t.$$.fragment,o),D(s.$$.fragment,o),D($.$$.fragment,o),i=!1},d(o){T(e,o),o&&g(n),T(t,o),o&&g(r),T(s,o),o&&g(f),T($,o)}}}function Be(l){let e,n;return e=new Se({props:{title:l[12].Path,$$slots:{default:[ut]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.title=t[12].Path),r&16385&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ct(l){let e;return{c(){e=M("Add Location")},l(n){e=H(n,"Add Location")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function mt(l){let e,n,t,r=l[0].ID+"",s,f,$,c,i,u,I,k,m,a,o,v,p,S,C,R,b,Z,Y,N,te,G;function ge(d){l[3](d)}let ae={id:`s-id-${l[1]}`,label:"ID",placeholder:"E.g. popplio, arcadia-rpc etc.",minlength:1};l[0].ID!==void 0&&(ae.value=l[0].ID),$=new ue({props:ae}),y.push(()=>x($,"value",ge));function he(d){l[4](d)}let _={id:`s-names-${l[1]}`,title:"Subdomain",label:"Subdomain (@root for root domain)",placeholder:"example.com, www.example.com etc.",minlength:3};l[0].Names!==void 0&&(_.values=l[0].Names),u=new Oe({props:_}),y.push(()=>x(u,"values",he));function E(d){l[5](d)}let X={id:`s-comment-${l[1]}`,label:"Comment",placeholder:"E.g. Popplio Web API",minlength:1};l[0].Comment!==void 0&&(X.value=l[0].Comment),o=new ue({props:X}),y.push(()=>x(o,"value",E));function Q(d){l[6](d)}let re={name:"broken",placeholder:"Is the server broken/disabled?",options:new Map([["Yes, it is","true"],["No, its not","false"]])};l[2]!==void 0&&(re.value=l[2]),S=new Re({props:re}),y.push(()=>x(S,"value",Q));let ne=l[0].Locations,j=[];for(let d=0;d<ne.length;d+=1)j[d]=Be(Ae(l,ne,d));const de=d=>D(j[d],1,1,()=>{j[d]=null});return te=new le({props:{onclick:l[11],$$slots:{default:[ct]},$$scope:{ctx:l}}}),{c(){e=F("div"),n=F("h3"),t=M("Editting "),s=M(r),f=O(),P($.$$.fragment),i=O(),P(u.$$.fragment),k=O(),m=F("div"),a=O(),P(o.$$.fragment),p=O(),P(S.$$.fragment),R=O(),b=F("h3"),Z=M("Locations"),Y=O();for(let d=0;d<j.length;d+=1)j[d].c();N=O(),P(te.$$.fragment),this.h()},l(d){e=J(d,"DIV",{});var h=z(e);n=J(h,"H3",{class:!0});var K=z(n);t=H(K,"Editting "),s=H(K,r),K.forEach(g),f=q(h),A($.$$.fragment,h),i=q(h),A(u.$$.fragment,h),k=q(h),m=J(h,"DIV",{class:!0}),z(m).forEach(g),a=q(h),A(o.$$.fragment,h),p=q(h),A(S.$$.fragment,h),R=q(h),b=J(h,"H3",{class:!0});var se=z(b);Z=H(se,"Locations"),se.forEach(g),Y=q(h);for(let oe=0;oe<j.length;oe+=1)j[oe].l(h);N=q(h),A(te.$$.fragment,h),h.forEach(g),this.h()},h(){W(n,"class","text-xl font-semibold"),W(m,"class","mb-2"),W(b,"class","text-xl font-semibold")},m(d,h){L(d,e,h),V(e,n),V(n,t),V(n,s),V(e,f),B($,e,null),V(e,i),B(u,e,null),V(e,k),V(e,m),V(e,a),B(o,e,null),V(e,p),B(S,e,null),V(e,R),V(e,b),V(b,Z),V(e,Y);for(let K=0;K<j.length;K+=1)j[K]&&j[K].m(e,null);V(e,N),B(te,e,null),G=!0},p(d,[h]){(!G||h&1)&&r!==(r=d[0].ID+"")&&_e(s,r);const K={};h&2&&(K.id=`s-id-${d[1]}`),!c&&h&1&&(c=!0,K.value=d[0].ID,ee(()=>c=!1)),$.$set(K);const se={};h&2&&(se.id=`s-names-${d[1]}`),!I&&h&1&&(I=!0,se.values=d[0].Names,ee(()=>I=!1)),u.$set(se);const oe={};h&2&&(oe.id=`s-comment-${d[1]}`),!v&&h&1&&(v=!0,oe.value=d[0].Comment,ee(()=>v=!1)),o.$set(oe);const De={};if(!C&&h&4&&(C=!0,De.value=d[2],ee(()=>C=!1)),S.$set(De),h&1){ne=d[0].Locations;let U;for(U=0;U<ne.length;U+=1){const Le=Ae(d,ne,U);j[U]?(j[U].p(Le,h),w(j[U],1)):(j[U]=Be(Le),j[U].c(),w(j[U],1),j[U].m(e,N))}for(ie(),U=ne.length;U<j.length;U+=1)de(U);fe()}const we={};h&1&&(we.onclick=d[11]),h&16384&&(we.$$scope={dirty:h,ctx:d}),te.$set(we)},i(d){if(!G){w($.$$.fragment,d),w(u.$$.fragment,d),w(o.$$.fragment,d),w(S.$$.fragment,d);for(let h=0;h<ne.length;h+=1)w(j[h]);w(te.$$.fragment,d),G=!0}},o(d){D($.$$.fragment,d),D(u.$$.fragment,d),D(o.$$.fragment,d),D(S.$$.fragment,d),j=j.filter(Boolean);for(let h=0;h<j.length;h+=1)D(j[h]);D(te.$$.fragment,d),G=!1},d(d){d&&g(e),T($),T(u),T(o),T(S),ke(j,d),T(te)}}}function $t(l,e,n){let{server:t}=e,{i:r}=e,s=t.Broken?"true":"false";function f(o){l.$$.not_equal(t.ID,o)&&(t.ID=o,n(0,t),n(2,s))}function $(o){l.$$.not_equal(t.Names,o)&&(t.Names=o,n(0,t),n(2,s))}function c(o){l.$$.not_equal(t.Comment,o)&&(t.Comment=o,n(0,t),n(2,s))}function i(o){s=o,n(2,s)}const u=o=>{n(0,t.Locations=t.Locations.filter((v,p)=>p!==o),t)},I=o=>{n(0,t.Locations=[...t.Locations.slice(0,o+1),{Path:"Not Specified"},...t.Locations.slice(o+1)],t)},k=o=>{let v=prompt("Which index would you like to move this location to? (0 is the top)");if(v===null)return;let p=parseInt(v);if(isNaN(p)){alert("That is not a number!");return}if(p<0||p>t.Locations.length-1){alert("That is not a valid index!");return}let S=t.Locations[o],C=t.Locations[p];n(0,t.Locations[p]=S,t),n(0,t.Locations[o]=C,t)};function m(o,v,p,S){p[S]=o,n(0,t),n(2,s)}const a=()=>{n(0,t.Locations=[...t.Locations,{Path:"Not Specified"}],t)};return l.$$set=o=>{"server"in o&&n(0,t=o.server),"i"in o&&n(1,r=o.i)},l.$$.update=()=>{l.$$.dirty&4&&n(0,t.Broken=s==="true",t)},[t,r,s,f,$,c,i,u,I,k,m,a]}class _t extends ce{constructor(e){super(),me(this,e,$t,mt,$e,{server:0,i:1})}}function Te(l,e,n){const t=l.slice();return t[10]=e[n],t[11]=e,t[12]=n,t}function pt(l){let e;return{c(){e=M("Delete Server")},l(n){e=H(n,"Delete Server")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function gt(l){let e;return{c(){e=M("Add Server Below")},l(n){e=H(n,"Add Server Below")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function ht(l){let e;return{c(){e=M("Move Server")},l(n){e=H(n,"Move Server")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function dt(l){let e,n,t,r,s,f,$,c,i;function u(){return l[5](l[12])}e=new pe({props:{onclick:u,$$slots:{default:[pt]},$$scope:{ctx:l}}}),t=new le({props:{onclick:l[6],$$slots:{default:[gt]},$$scope:{ctx:l}}});function I(){return l[7](l[12])}s=new le({props:{onclick:I,$$slots:{default:[ht]},$$scope:{ctx:l}}});function k(a){l[8](a,l[10],l[11],l[12])}let m={i:l[12]};return l[10]!==void 0&&(m.server=l[10]),$=new _t({props:m}),y.push(()=>x($,"server",k)),{c(){P(e.$$.fragment),n=O(),P(t.$$.fragment),r=O(),P(s.$$.fragment),f=O(),P($.$$.fragment)},l(a){A(e.$$.fragment,a),n=q(a),A(t.$$.fragment,a),r=q(a),A(s.$$.fragment,a),f=q(a),A($.$$.fragment,a)},m(a,o){B(e,a,o),L(a,n,o),B(t,a,o),L(a,r,o),B(s,a,o),L(a,f,o),B($,a,o),i=!0},p(a,o){l=a;const v={};o&1&&(v.onclick=u),o&8192&&(v.$$scope={dirty:o,ctx:l}),e.$set(v);const p={};o&1&&(p.onclick=l[6]),o&8192&&(p.$$scope={dirty:o,ctx:l}),t.$set(p);const S={};o&1&&(S.onclick=I),o&8192&&(S.$$scope={dirty:o,ctx:l}),s.$set(S);const C={};!c&&o&1&&(c=!0,C.server=l[10],ee(()=>c=!1)),$.$set(C)},i(a){i||(w(e.$$.fragment,a),w(t.$$.fragment,a),w(s.$$.fragment,a),w($.$$.fragment,a),i=!0)},o(a){D(e.$$.fragment,a),D(t.$$.fragment,a),D(s.$$.fragment,a),D($.$$.fragment,a),i=!1},d(a){T(e,a),a&&g(n),T(t,a),a&&g(r),T(s,a),a&&g(f),T($,a)}}}function Ce(l){let e,n;return e=new Se({props:{title:l[10].ID,$$slots:{default:[dt]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.title=t[10].ID),r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function bt(l){let e;return{c(){e=M("Add Server")},l(n){e=H(n,"Add Server")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function vt(l){let e,n;return e=new We({props:{object:l[0]}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.object=t[0]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function wt(l){let e;return{c(){e=M("Save changes")},l(n){e=H(n,"Save changes")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function kt(l){let e;return{c(){e=M("Delete Domain")},l(n){e=H(n,"Delete Domain")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function Ve(l){let e,n;return e=new Ye({props:{output:l[2]}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.output=t[2]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function St(l){var ge,ae,he;let e,n,t=((ge=l[0])==null?void 0:ge.Domain)+"",r,s,f,$,c,i,u,I,k,m,a,o,v,p,S,C,R,b,Z,Y=(he=(ae=l[0])==null?void 0:ae.Server)==null?void 0:he.Servers,N=[];for(let _=0;_<Y.length;_+=1)N[_]=Ce(Te(l,Y,_));const te=_=>D(N[_],1,1,()=>{N[_]=null});I=new le({props:{onclick:l[9],$$slots:{default:[bt]},$$scope:{ctx:l}}}),o=new Se({props:{title:"Tree View",$$slots:{default:[vt]},$$scope:{ctx:l}}}),p=new le({props:{onclick:l[3],$$slots:{default:[wt]},$$scope:{ctx:l}}}),C=new pe({props:{onclick:l[4],$$slots:{default:[kt]},$$scope:{ctx:l}}});let G=l[1]!=""&&Ve(l);return{c(){e=F("h1"),n=M("Viewing "),r=M(t),s=O(),f=F("h2"),$=M("Server List"),c=O(),i=F("div");for(let _=0;_<N.length;_+=1)N[_].c();u=O(),P(I.$$.fragment),k=O(),m=F("hr"),a=O(),P(o.$$.fragment),v=O(),P(p.$$.fragment),S=O(),P(C.$$.fragment),R=O(),G&&G.c(),b=ve(),this.h()},l(_){e=J(_,"H1",{class:!0});var E=z(e);n=H(E,"Viewing "),r=H(E,t),E.forEach(g),s=q(_),f=J(_,"H2",{class:!0});var X=z(f);$=H(X,"Server List"),X.forEach(g),c=q(_),i=J(_,"DIV",{class:!0});var Q=z(i);for(let re=0;re<N.length;re+=1)N[re].l(Q);u=q(Q),A(I.$$.fragment,Q),k=q(Q),m=J(Q,"HR",{class:!0}),a=q(Q),A(o.$$.fragment,Q),Q.forEach(g),v=q(_),A(p.$$.fragment,_),S=q(_),A(C.$$.fragment,_),R=q(_),G&&G.l(_),b=ve(),this.h()},h(){W(e,"class","text-2xl font-semibold"),W(f,"class","text-xl font-semibold"),W(m,"class","mt-2 mb-2"),W(i,"class","flex flex-col space-y-2")},m(_,E){L(_,e,E),V(e,n),V(e,r),L(_,s,E),L(_,f,E),V(f,$),L(_,c,E),L(_,i,E);for(let X=0;X<N.length;X+=1)N[X]&&N[X].m(i,null);V(i,u),B(I,i,null),V(i,k),V(i,m),V(i,a),B(o,i,null),L(_,v,E),B(p,_,E),L(_,S,E),B(C,_,E),L(_,R,E),G&&G.m(_,E),L(_,b,E),Z=!0},p(_,[E]){var j,de,d;if((!Z||E&1)&&t!==(t=((j=_[0])==null?void 0:j.Domain)+"")&&_e(r,t),E&1){Y=(d=(de=_[0])==null?void 0:de.Server)==null?void 0:d.Servers;let h;for(h=0;h<Y.length;h+=1){const K=Te(_,Y,h);N[h]?(N[h].p(K,E),w(N[h],1)):(N[h]=Ce(K),N[h].c(),w(N[h],1),N[h].m(i,u))}for(ie(),h=Y.length;h<N.length;h+=1)te(h);fe()}const X={};E&1&&(X.onclick=_[9]),E&8192&&(X.$$scope={dirty:E,ctx:_}),I.$set(X);const Q={};E&8193&&(Q.$$scope={dirty:E,ctx:_}),o.$set(Q);const re={};E&8192&&(re.$$scope={dirty:E,ctx:_}),p.$set(re);const ne={};E&8192&&(ne.$$scope={dirty:E,ctx:_}),C.$set(ne),_[1]!=""?G?(G.p(_,E),E&2&&w(G,1)):(G=Ve(_),G.c(),w(G,1),G.m(b.parentNode,b)):G&&(ie(),D(G,1,1,()=>{G=null}),fe())},i(_){if(!Z){for(let E=0;E<Y.length;E+=1)w(N[E]);w(I.$$.fragment,_),w(o.$$.fragment,_),w(p.$$.fragment,_),w(C.$$.fragment,_),w(G),Z=!0}},o(_){N=N.filter(Boolean);for(let E=0;E<N.length;E+=1)D(N[E]);D(I.$$.fragment,_),D(o.$$.fragment,_),D(p.$$.fragment,_),D(C.$$.fragment,_),D(G),Z=!1},d(_){_&&g(e),_&&g(s),_&&g(f),_&&g(c),_&&g(i),ke(N,_),T(I),T(o),_&&g(v),T(p,_),_&&g(S),T(C,_),_&&g(R),G&&G.d(_),_&&g(b)}}}function Dt(l,e,n){let{domain:t}=e;const r=async()=>{let m=await fetch("/api/nginx/updateDomain",{method:"POST",body:JSON.stringify(t)});if(!m.ok){let a=await m.text();Ee(a);return}Me("Successfully updated domain!")};let s="",f=[];const $=async()=>{if(prompt("Are you sure you want to delete this domain? Type 'YES' to confirm.")!=="YES")return;let a=await fetch(`/api/nginx/deleteDomain?domain=${t==null?void 0:t.Domain}`,{method:"POST"});if(!a.ok){let o=await a.text();Ee(o);return}n(1,s=await a.text()),Fe(s,o=>{n(2,f=o)})},c=m=>{n(0,t.Server.Servers=t.Server.Servers.filter((a,o)=>o!==m),t)},i=()=>{n(0,t.Server.Servers=[...t.Server.Servers,{ID:"Not Specified",Names:[],Comment:"",Broken:!1,Locations:[]}],t)},u=m=>{var S,C,R;let a=prompt("Which index would you like to move this server to? (0 is the top)");if(a===null)return;let o=parseInt(a);if(isNaN(o)){alert("That is not a number!");return}if(o<0||o>((S=t==null?void 0:t.Server)==null?void 0:S.Servers.length)-1){alert("That is not a valid index!");return}let v=(C=t==null?void 0:t.Server)==null?void 0:C.Servers[m],p=(R=t==null?void 0:t.Server)==null?void 0:R.Servers[o];n(0,t.Server.Servers[o]=v,t),n(0,t.Server.Servers[m]=p,t)};function I(m,a,o,v){o[v]=m,n(0,t)}const k=()=>{n(0,t.Server.Servers=[...t.Server.Servers,{ID:"Not Specified",Names:[],Comment:"",Broken:!1,Locations:[{Path:"/"}]}],t)};return l.$$set=m=>{"domain"in m&&n(0,t=m.domain)},[t,s,f,r,$,c,i,u,I,k]}class Lt extends ce{constructor(e){super(),me(this,e,Dt,St,$e,{domain:0})}}function Et(l){let e,n=l[3]+"",t;return{c(){e=F("p"),t=M(n),this.h()},l(r){e=J(r,"P",{class:!0});var s=z(e);t=H(s,n),s.forEach(g),this.h()},h(){W(e,"class","text-red-500")},m(r,s){L(r,e,s),V(e,t)},p:be,i:be,o:be,d(r){r&&g(e)}}}function It(l){let e,n;return e=new Lt({props:{domain:l[2]}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p:be,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Nt(l){let e,n;return e=new Ge({props:{$$slots:{default:[Pt]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,r){B(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Pt(l){let e;return{c(){e=M("Loading metadata...")},l(n){e=H(n,"Loading metadata...")},m(n,t){L(n,e,t)},d(n){n&&g(e)}}}function At(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!0,pending:Nt,then:It,catch:Et,value:2,error:3,blocks:[,,,]};return qe(l[0](),t),{c(){e=F("div"),t.block.c()},l(r){e=J(r,"DIV",{});var s=z(e);t.block.l(s),s.forEach(g)},m(r,s){L(r,e,s),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,n=!0},p(r,[s]){l=r,je(t,l,s)},i(r){n||(w(t.block),n=!0)},o(r){for(let s=0;s<3;s+=1){const f=t.blocks[s];D(f)}n=!1},d(r){r&&g(e),t.block.d(),t.token=null,t=null}}}function Bt(l){const e=()=>new URLSearchParams(window.location.search).get("id")||"";return[async()=>{if(!e())throw new Error("No domain name provided in query");let t=await fetch("/api/nginx/getDomainList",{method:"POST"});if(!t.ok){let f=await t.text();throw new Error(f)}let s=(await t.json()).find(f=>(f==null?void 0:f.Domain)==e());if(!s)throw new Error("Domain not found");return s}]}class Yt extends ce{constructor(e){super(),me(this,e,Bt,At,$e,{})}}export{Yt as component};
