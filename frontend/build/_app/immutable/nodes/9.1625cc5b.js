import{S as ae,i as le,s as se,y as O,a as M,e as W,z as B,c as P,A as G,b as k,g as w,v as re,d as N,f as ie,B as J,h as d,q as j,r as q,u as fe,w as F,ac as Q,k as S,l as V,m as C,n as H,G as b,ad as X,C as ce,I as pe,J as R,K as me}from"../chunks/index.607a4587.js";import{B as Z,e as oe,s as ue}from"../chunks/strings.82d8c965.js";import{G as de}from"../chunks/GreyText.545daa15.js";import{I as Y}from"../chunks/InputSm.96943004.js";function $e(s){let e=s[0]?"Close Editor":"Edit Target",t;return{c(){t=j(e)},l(n){t=q(n,e)},m(n,a){k(n,t,a)},p(n,a){a&1&&e!==(e=n[0]?"Close Editor":"Edit Target")&&fe(t,e)},d(n){n&&d(t)}}}function ee(s){let e,t,n,a,l,i,r,o,_,c;function f(m){s[6](m)}let p={id:"editName",label:"New Target Name",placeholder:"ibl, artie etc.",minlength:1};s[1]!==void 0&&(p.value=s[1]),t=new Y({props:p}),F.push(()=>Q(t,"value",f));function v(m){s[7](m)}let D={id:"editDescription",label:"Target Description",placeholder:"A description of the target",minlength:1};return s[2]!==void 0&&(D.value=s[2]),l=new Y({props:D}),F.push(()=>Q(l,"value",v)),_=new Z({props:{onclick:s[8],$$slots:{default:[_e]},$$scope:{ctx:s}}}),{c(){e=S("div"),O(t.$$.fragment),a=M(),O(l.$$.fragment),r=M(),o=S("div"),O(_.$$.fragment),this.h()},l(m){e=V(m,"DIV",{class:!0});var $=C(e);B(t.$$.fragment,$),a=P($),B(l.$$.fragment,$),r=P($),o=V($,"DIV",{class:!0});var E=C(o);B(_.$$.fragment,E),E.forEach(d),$.forEach(d),this.h()},h(){H(o,"class","flex justify-end mt-2"),H(e,"class","mt-2")},m(m,$){k(m,e,$),G(t,e,null),b(e,a),G(l,e,null),b(e,r),b(e,o),G(_,o,null),c=!0},p(m,$){const E={};!n&&$&2&&(n=!0,E.value=m[1],X(()=>n=!1)),t.$set(E);const y={};!i&&$&4&&(i=!0,y.value=m[2],X(()=>i=!1)),l.$set(y);const L={};$&6&&(L.onclick=m[8]),$&512&&(L.$$scope={dirty:$,ctx:m}),_.$set(L)},i(m){c||(w(t.$$.fragment,m),w(l.$$.fragment,m),w(_.$$.fragment,m),c=!0)},o(m){N(t.$$.fragment,m),N(l.$$.fragment,m),N(_.$$.fragment,m),c=!1},d(m){m&&d(e),J(t),J(l),J(_)}}}function _e(s){let e;return{c(){e=j("Save")},l(t){e=q(t,"Save")},m(t,n){k(t,e,n)},d(t){t&&d(e)}}}function ge(s){let e,t,n,a;e=new Z({props:{onclick:s[5],$$slots:{default:[$e]},$$scope:{ctx:s}}});let l=s[0]&&ee(s);return{c(){O(e.$$.fragment),t=M(),l&&l.c(),n=W()},l(i){B(e.$$.fragment,i),t=P(i),l&&l.l(i),n=W()},m(i,r){G(e,i,r),k(i,t,r),l&&l.m(i,r),k(i,n,r),a=!0},p(i,[r]){const o={};r&1&&(o.onclick=i[5]),r&513&&(o.$$scope={dirty:r,ctx:i}),e.$set(o),i[0]?l?(l.p(i,r),r&1&&w(l,1)):(l=ee(i),l.c(),w(l,1),l.m(n.parentNode,n)):l&&(re(),N(l,1,1,()=>{l=null}),ie())},i(i){a||(w(e.$$.fragment,i),w(l),a=!0)},o(i){N(e.$$.fragment,i),N(l),a=!1},d(i){J(e,i),i&&d(t),l&&l.d(i),i&&d(n)}}}function he(s,e,t){let{target:n}=e,a=!1,l=n==null?void 0:n.Name,i=n==null?void 0:n.Description;const r=async p=>{let v=await fetch(`/api/systemd/updateMeta?action=update&name=${p==null?void 0:p.Name}`,{method:"POST",body:JSON.stringify(p)});if(!v.ok){let D=await v.text();oe(D)}ue("Target updated successfully")},o=()=>t(0,a=!a);function _(p){l=p,t(1,l)}function c(p){i=p,t(2,i)}const f=()=>r({Name:l,Description:i});return s.$$set=p=>{"target"in p&&t(4,n=p.target)},[a,l,i,r,n,o,_,c,f]}class ve extends ae{constructor(e){super(),le(this,e,he,ge,se,{target:4})}}function te(s,e,t){const n=s.slice();return n[9]=e[t],n}function be(s){let e;return{c(){e=j("Create Target")},l(t){e=q(t,"Create Target")},m(t,n){k(t,e,n)},d(t){t&&d(e)}}}function ke(s){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function we(s){var i;let e,t,n=((i=s[8])==null?void 0:i.Targets)||[],a=[];for(let r=0;r<n.length;r+=1)a[r]=ne(te(s,n,r));const l=r=>N(a[r],1,1,()=>{a[r]=null});return{c(){for(let r=0;r<a.length;r+=1)a[r].c();e=W()},l(r){for(let o=0;o<a.length;o+=1)a[o].l(r);e=W()},m(r,o){for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(r,o);k(r,e,o),t=!0},p(r,o){var _;if(o&12){n=((_=r[8])==null?void 0:_.Targets)||[];let c;for(c=0;c<n.length;c+=1){const f=te(r,n,c);a[c]?(a[c].p(f,o),w(a[c],1)):(a[c]=ne(f),a[c].c(),w(a[c],1),a[c].m(e.parentNode,e))}for(re(),c=n.length;c<a.length;c+=1)l(c);ie()}},i(r){if(!t){for(let o=0;o<n.length;o+=1)w(a[o]);t=!0}},o(r){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)N(a[o]);t=!1},d(r){me(a,r),r&&d(e)}}}function De(s){let e;return{c(){e=j("Delete")},l(t){e=q(t,"Delete")},m(t,n){k(t,e,n)},d(t){t&&d(e)}}}function ne(s){var K,U;let e,t,n,a=((K=s[9])==null?void 0:K.Name)+"",l,i,r,o=((U=s[9])==null?void 0:U.Description)+"",_,c,f,p,v,D,m,$,E,y;function L(){return s[7](s[9])}return p=new Z({props:{onclick:L,$$slots:{default:[De]},$$scope:{ctx:s}}}),$=new ve({props:{target:s[9]}}),{c(){e=S("div"),t=S("div"),n=S("p"),l=j(a),i=M(),r=S("p"),_=j(o),c=M(),f=S("div"),O(p.$$.fragment),v=M(),D=S("span"),m=M(),O($.$$.fragment),E=M(),this.h()},l(T){e=V(T,"DIV",{});var g=C(e);t=V(g,"DIV",{class:!0});var u=C(t);n=V(u,"P",{class:!0});var h=C(n);l=q(h,a),h.forEach(d),i=P(u),r=V(u,"P",{class:!0});var I=C(r);_=q(I,o),I.forEach(d),u.forEach(d),c=P(g),f=V(g,"DIV",{});var A=C(f);B(p.$$.fragment,A),v=P(A),D=V(A,"SPAN",{class:!0}),C(D).forEach(d),m=P(A),B($.$$.fragment,A),A.forEach(d),E=P(g),g.forEach(d),this.h()},h(){H(n,"class","text-lg font-semibold"),H(r,"class","text-sm"),H(t,"class","inline-block w-32"),H(D,"class","ml-2")},m(T,g){k(T,e,g),b(e,t),b(t,n),b(n,l),b(t,i),b(t,r),b(r,_),b(e,c),b(e,f),G(p,f,null),b(f,v),b(f,D),b(f,m),G($,f,null),b(e,E),y=!0},p(T,g){s=T;const u={};g&4096&&(u.$$scope={dirty:g,ctx:s}),p.$set(u)},i(T){y||(w(p.$$.fragment,T),w($.$$.fragment,T),y=!0)},o(T){N(p.$$.fragment,T),N($.$$.fragment,T),y=!1},d(T){T&&d(e),J(p),J($)}}}function Ee(s){let e,t;return e=new de({props:{$$slots:{default:[Te]},$$scope:{ctx:s}}}),{c(){O(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,a){G(e,n,a),t=!0},p(n,a){const l={};a&4096&&(l.$$scope={dirty:a,ctx:n}),e.$set(l)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Te(s){let e;return{c(){e=j("Loading metadata...")},l(t){e=q(t,"Loading metadata...")},m(t,n){k(t,e,n)},d(t){t&&d(e)}}}function Ne(s){let e,t,n,a,l,i,r,o,_,c,f,p,v,D,m,$,E,y;function L(u){s[4](u)}let K={id:"addName",label:"Target Name",placeholder:"ibl, artie etc.",minlength:1};s[0]!==void 0&&(K.value=s[0]),l=new Y({props:K}),F.push(()=>Q(l,"value",L));function U(u){s[5](u)}let T={id:"addDescription",label:"Target Description",placeholder:"Whoa",minlength:1};s[1]!==void 0&&(T.value=s[1]),o=new Y({props:T}),F.push(()=>Q(o,"value",U)),f=new Z({props:{onclick:s[6],$$slots:{default:[be]},$$scope:{ctx:s}}});let g={ctx:s,current:null,token:null,hasCatch:!1,pending:Ee,then:we,catch:ke,value:8,blocks:[,,,]};return ce(s[3](),g),{c(){e=S("h3"),t=j("Add Target"),n=M(),a=S("div"),O(l.$$.fragment),r=M(),O(o.$$.fragment),c=M(),O(f.$$.fragment),p=M(),v=S("h2"),D=j("Meta Editor"),m=M(),$=S("div"),E=S("div"),g.block.c(),this.h()},l(u){e=V(u,"H3",{class:!0});var h=C(e);t=q(h,"Add Target"),h.forEach(d),n=P(u),a=V(u,"DIV",{});var I=C(a);B(l.$$.fragment,I),r=P(I),B(o.$$.fragment,I),c=P(I),B(f.$$.fragment,I),I.forEach(d),p=P(u),v=V(u,"H2",{class:!0});var A=C(v);D=q(A,"Meta Editor"),A.forEach(d),m=P(u),$=V(u,"DIV",{});var z=C($);E=V(z,"DIV",{});var x=C(E);g.block.l(x),x.forEach(d),z.forEach(d),this.h()},h(){H(e,"class","text-xl font-semibold"),H(v,"class","text-2xl font-semibold")},m(u,h){k(u,e,h),b(e,t),k(u,n,h),k(u,a,h),G(l,a,null),b(a,r),G(o,a,null),b(a,c),G(f,a,null),k(u,p,h),k(u,v,h),b(v,D),k(u,m,h),k(u,$,h),b($,E),g.block.m(E,g.anchor=null),g.mount=()=>E,g.anchor=null,y=!0},p(u,[h]){s=u;const I={};!i&&h&1&&(i=!0,I.value=s[0],X(()=>i=!1)),l.$set(I);const A={};!_&&h&2&&(_=!0,A.value=s[1],X(()=>_=!1)),o.$set(A);const z={};h&3&&(z.onclick=s[6]),h&4096&&(z.$$scope={dirty:h,ctx:s}),f.$set(z),pe(g,s,h)},i(u){y||(w(l.$$.fragment,u),w(o.$$.fragment,u),w(f.$$.fragment,u),w(g.block),y=!0)},o(u){N(l.$$.fragment,u),N(o.$$.fragment,u),N(f.$$.fragment,u);for(let h=0;h<3;h+=1){const I=g.blocks[h];N(I)}y=!1},d(u){u&&d(e),u&&d(n),u&&d(a),J(l),J(o),J(f),u&&d(p),u&&d(v),u&&d(m),u&&d($),g.block.d(),g.token=null,g=null}}}function Ie(s,e,t){const n=async(f,p)=>{let v=await fetch(`/api/systemd/updateMeta?action=${f}`,{method:"POST",body:JSON.stringify(p)});if(!v.ok){let D=await v.text();oe(D)}ue("Target updated successfully")},a=async()=>{let f=await fetch("/api/systemd/getMeta",{method:"POST"});if(!f.ok){let v=await f.text();throw new Error(v)}return await f.json()};let l,i;function r(f){l=f,t(0,l)}function o(f){i=f,t(1,i)}return[l,i,n,a,r,o,()=>{n("create",{Name:l,Description:i})},f=>{n("delete",f)}]}class Pe extends ae{constructor(e){super(),le(this,e,Ie,Ne,se,{})}}export{Pe as component};
